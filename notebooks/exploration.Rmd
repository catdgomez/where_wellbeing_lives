---
title: "R Notebook"
output: html_notebook
---
Libraries I may use called
```{r}

library(tidyverse)
# install for visualizations 
library(ggplot2)
# install to combine date and time
library(lubridate)
# for melting a df
library(reshape)

```
Reading in the first dataset, perceived health status.
 
```{r}
perceived_health_status <- read_csv("../data/perceived_health_status.csv")
dnmk <- read_csv("../data/denmark_only_phs.csv")
perceived_health_status_once <- read_csv("../data/perceived_health_status_once.csv")

```
Inspecting the denmark only data:

```{r}
dnmk %>% 
  filter(Sex == "Total")
```

It appears that then 


Inspecting the perceived health data:

```{r}
perceived_health_status %>% 
  filter(`Reference area` == "Denmark")
```

Inspect original perceived health data:
```{r}
perceived_health_status_once%>% 
  filter(`Reference area` == "Denmark")
```


Filtering.

```{r}

perceived_health_status_stripped <- perceived_health_status %>% 
  filter(TIME_PERIOD == 2022) %>% 
  filter(REF_AREA == "AUT") %>% 
  filter(Sex == "Total") %>% 
  filter(Age == "15 years or over")  

perceived_health_status_stripped

```
As it appears that after 2007, the number of observations are more significant in number, I will limit my data to 2007 and later. But, since it appears the number of observations drops off in 2024, I will limit my data to a range of 2007-2023. As well, I want to capture all genders and ages. 

```{r}
# input code to limit year range, age range, and gender in perceived health status dataset
phs <- perceived_health_status %>% 
  filter(TIME_PERIOD == c(2007:2023)) %>% 
  filter(Sex == "Total") #%>% 
  # filter(Age == "15 years or over")

phs

```
It turns out that Denmark's data comes only from a population of 15-24 year old, which would be excluded when I filter for age range collective/Total.
```{r}

perceived_health_status_once %>% 
  filter(TIME_PERIOD == c(2007:2023)) %>% 
  filter(Sex == "Total") %>% 
  filter(`Reference area` == "Denmark")

```


Inspect the dataset for the number of years it covers.

```{r}

barplot(table(perceived_health_status$TIME_PERIOD), main = "number of observations of year in the data")


```
Inspecting the data for balance in the health status column.

```{r}

phs %>% 
  group_by(HEALTH_STATUS) %>% 
  summarize(n=n())

```

Which countries are most heavily represented in the data? Denmark was selected to be included I will download a Denmark only data and investigate why it is no longer located in this data. 

```{r}

phs %>% 
  group_by(`Reference area`) %>%
  summarize(n=n())

```

```{r}
phs %>% 
  group_by(AGE) %>%
  summarize(n=n())

```





```{r}

# education_level <- read_csv("../data/educational_attainment_distribution_age_gender.csv")
# education_levels_defined <- read_csv("../data/educational_attainment_distribution.csv")
education_levels_three <- read_csv("../data/educational_attainment.csv")

```

```{r}

# ISCED11A_5T8 = Tertiary education
# ISCED11A_3_4 = Upper secondary or post-secondary non-tertiary education
# ISCED11A_0T2 = Below upper secondary education
education_levels_three

```
Verify that there are simply three categories for the education level attained and  Education attainment level columns
```{r}

sort(unique(education_levels_three$ATTAINMENT_LEV))
sort(unique(education_levels_three$`Educational attainment level`))

```

```{r}
sort(unique(education_levels_three$STATISTICAL_OPERATION))
```
I want to use the observed values and not the standard error values at this time. 
```{r}

# phs_obs <- phs %>% 
  # filter()

```



```{r}
el_third <- education_levels_three %>% 
  filter(Sex == "Total") %>% 
  filter(Age == "From 25 to 64 years") %>% 
  filter(TIME_PERIOD == 2010) %>% 
  filter(OBS_STATUS == "A") %>% 
  filter(REF_AREA == "AUT") %>% 
  filter(STATISTICAL_OPERATION == "OBS")

el_third

```


```{r}

el_secondary <- education_levels_defined %>% 
  filter(Sex == "Total") %>% 
  filter(Age == "From 25 to 64 years") %>% 
  filter(TIME_PERIOD == 2010) %>% 
  filter(OBS_STATUS == "A") %>% 
  filter(REF_AREA == "AUT")

el_secondary

```

```{r}
# sort(unique(el_once$OBS_VALUE))
wellbeing_social<- read_csv("../data/current_wellbeing_exp.csv")

```

```{r}

# sort(unique(el_once$`Educational attainment level`))



```

```{r}
# sort(unique(el_secondary$`Educational attainment level`))
```

```{r}

# el_once   %>%  
  # group_by(`Educational attainment level`) %>%
  # summarize(n = n())

```


```{r}

# barplot(table(el_once$`Educational attainment level`), main = "number of observations of that education level in the data")

```


```{r}

safety_regions <- read_csv("../data/safety_regions.csv")


```
```{r}
safety_regions %>% 
  filter(TIME_PERIOD == 2010) %>% 
  filter(REF_AREA == "AUT") #%>% 
  # filter(Sex == "Total") %>% 
  # filter(Age == "15 years or over")  


```

```{r}

wellbeing_social %>% 
  filter(TIME_PERIOD == 2022) %>% 
  filter(REF_AREA == "AUT") #%>% 
  # filter(Unit)
```

```{r}


```

```{r}

```

